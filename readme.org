#+TITLE: HETI Stack Simulator
stack_sim.py
* Introduction
- First of all there is NO guarantee that any of this is accurate. It
  is only based on hearsay about how the stack algorithm works
* The algorithm
Pseudocode but it's formatted as python for readability purposes
#+BEGIN_SRC python
for category in categories:
  for hospital in hospitals:
    for rank in range(length(hospitals)):
      preferenced_this = filter(lambda a: a.preferences[rank] == hospital and a.category == category, unallocated_applicants)
      hospital.fill(min(preferenced_this, random.select(preferenced_this, hospital.capacity)))
#+END_SRC
- For people who aren't nerds:
  - The algorithm first looks at category
  - Then allocates people to each hospital by rank
  - It fills spots in each hospital by selecting from people who preferenced that hospital, in descending order of rank
    - If there are more applicants who ranked that hospital than there are spots, it will randomly select from that pool so all spots are filled
    - Otherwise it just fills all of those spots with those applicants
* Implementation
- 3 possible scenarios were tested:
  1. Everybody preferences hospitals entirely randomly
  2. Everybody stacks
  3. Everybody stacks but moves a random hospital of their choice to
     first place
- Incomplete list of deviations from reality, simplifications and
  assumptions:
  1. Everyone chooses randomly
  2. No hospital is more favourable than another (corollary of assumption 1)
  3. Everybody has exact same stack
  4. Everyone who applies accepts the first job offer they get.
  5. There are no other entry schemes apart from the normal random-allocation route.
  6. Category 1 applicants are basically guaranteed a job (corollary
     of assumption 5).
* Results
Now you can see there are some obvious problems with the results which
I intend to fix. First of all there are no allocations to ANYONE in
any category below 2, which makes no sense. But otherwise it seems
consistent with what people have been saying. Basically only category
1 and 2 can really be looked at as of now.
** Everyone is random
1539 [916, 202, 158, 148, 101, 14]
*** Total
[[./All random Satisfied applicants.png]]
| Total                                          | Count (%)    |
|------------------------------------------------+--------------|
| Total applicants who got their 1st preference | 718 (46.65%) |
| Total applicants who got their 2nd preference | 104 (6.76%) |
| Total applicants who got their 3rd preference | 58 (3.77%) |
| Total applicants who got their 4th preference | 40 (2.60%) |
| Total applicants who got their 5th preference | 27 (1.75%) |
| Total applicants who got their 6th preference | 33 (2.14%) |
| Total applicants who got their 7th preference | 5 (0.32%) |
| Total applicants who got their 8th preference | 6 (0.39%) |
| Total applicants who got their 9th preference | 7 (0.45%) |
| Total applicants who got their 10th preference | 10 (0.65%) |
| Total applicants who got their 11st preference | 8 (0.52%) |
| Total applicants who got their 12nd preference | 2 (0.13%) |
| Total applicants who got their 13rd preference | 3 (0.19%) |
| Total applicants who got their 14th preference | 6 (0.39%) |
| Total applicants who got their 15th preference | 0 (0.00%) |
| Total applicants who received any placement | 1027 (66.73%) |
| Total applicants who did not get any placement | 512 (33.27%) |
| Total applicants | 1539 |
*** Category 1
[[./All random Satisfied applicants (category 1).png]]
| Category 1                                                | Count (%)    |
|-----------------------------------------------------------+--------------|
| Total Category 1 applicants who got their 1st preference | 694 (75.76%) |
| Total Category 1 applicants who got their 2nd preference | 79 (8.62%) |
| Total Category 1 applicants who got their 3rd preference | 21 (2.29%) |
| Total Category 1 applicants who got their 4th preference | 23 (2.51%) |
| Total Category 1 applicants who got their 5th preference | 19 (2.07%) |
| Total Category 1 applicants who got their 6th preference | 33 (3.60%) |
| Total Category 1 applicants who got their 7th preference | 5 (0.55%) |
| Total Category 1 applicants who got their 8th preference | 6 (0.66%) |
| Total Category 1 applicants who got their 9th preference | 7 (0.76%) |
| Total Category 1 applicants who got their 10th preference | 10 (1.09%) |
| Total Category 1 applicants who got their 11st preference | 8 (0.87%) |
| Total Category 1 applicants who got their 12nd preference | 2 (0.22%) |
| Total Category 1 applicants who got their 13rd preference | 3 (0.33%) |
| Total Category 1 applicants who got their 14th preference | 6 (0.66%) |
| Total Category 1 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 1 applicants who received any placement | 1027 (112.12%) |
| Total Category 1 applicants who did not get any placement | 512 (55.90%) |
| Total Category 1 applicants | 916 |
*** Category 2
[[./All random Satisfied applicants (category 2).png]]
| Category 2                                                | Count (%)   |
|-----------------------------------------------------------+-------------|
| Total Category 2 applicants who got their 1st preference | 24 (11.88%) |
| Total Category 2 applicants who got their 2nd preference | 25 (12.38%) |
| Total Category 2 applicants who got their 3rd preference | 37 (18.32%) |
| Total Category 2 applicants who got their 4th preference | 17 (8.42%) |
| Total Category 2 applicants who got their 5th preference | 8 (3.96%) |
| Total Category 2 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 2 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 2 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 2 applicants who got their 14th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 2 applicants who received any placement | 111 (54.95%) |
| Total Category 2 applicants who did not get any placement | 91 (45.05%) |
| Total Category 2 applicants | 202 |
*** Category 3
[[./All random Satisfied applicants (category 3).png]]
| Category 3                                                | Count (%) |
|-----------------------------------------------------------+-----------|
| Total Category 3 applicants who got their 1st preference | 0 (0.00%) |
| Total Category 3 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 3 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 3 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 3 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 3 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 3 applicants who got their 14th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 3 applicants who received any placement | 0 (0.00%) |
| Total Category 3 applicants who did not get any placement | 158 (100.00%) |
| Total Category 3 applicants | 158 |
*** Category 4
[[./All random Satisfied applicants (category 4).png]]
| Category 4                                                | Count (%) |
|-----------------------------------------------------------+-----------|
| Total Category 4 applicants who got their 1st preference | 0 (0.00%) |
| Total Category 4 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 4 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 4 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 4 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 4 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 4 applicants who got their 14th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 4 applicants who received any placement | 0 (0.00%) |
| Total Category 4 applicants who did not get any placement | 148 (100.00%) |
| Total Category 4 applicants | 148 |
*** Category 5
[[./All random Satisfied applicants (category 5).png]]
| Category 5                                                | Count (%) |
|-----------------------------------------------------------+-----------|
| Total Category 5 applicants who got their 1st preference | 0 (0.00%) |
| Total Category 5 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 5 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 5 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 5 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 5 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 5 applicants who got their 14th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 5 applicants who received any placement | 0 (0.00%) |
| Total Category 5 applicants who did not get any placement | 101 (100.00%) |
| Total Category 5 applicants | 101 |
*** Category 6
[[./All random Satisfied applicants (category 6).png]]
| Category 6                                                | Count (%) |
|-----------------------------------------------------------+-----------|
| Total Category 6 applicants who got their 1st preference | 0 (0.00%) |
| Total Category 6 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 6 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 6 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 6 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 6 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 6 applicants who got their 14th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 6 applicants who received any placement | 0 (0.00%) |
| Total Category 6 applicants who did not get any placement | 14 (100.00%) |
| Total Category 6 applicants | 14 |
** Everyone stacks
*** Total
[[./All stack Satisfied applicants.png]]
| Total                                          | n (%)       |
|------------------------------------------------+-------------|
| Total applicants who got their 1st preference | 64 (4.16%) |
| Total applicants who got their 2nd preference | 71 (4.61%) |
| Total applicants who got their 3rd preference | 51 (3.31%) |
| Total applicants who got their 4th preference | 54 (3.51%) |
| Total applicants who got their 5th preference | 49 (3.18%) |
| Total applicants who got their 6th preference | 76 (4.94%) |
| Total applicants who got their 7th preference | 121 (7.86%) |
| Total applicants who got their 8th preference | 40 (2.60%) |
| Total applicants who got their 9th preference | 125 (8.12%) |
| Total applicants who got their 10th preference | 74 (4.81%) |
| Total applicants who got their 11st preference | 51 (3.31%) |
| Total applicants who got their 12nd preference | 68 (4.42%) |
| Total applicants who got their 13rd preference | 66 (4.29%) |
| Total applicants who got their 14th preference | 63 (4.09%) |
| Total applicants who got their 15th preference | 54 (3.51%) |
| Total applicants who received any placement | 1027 (66.73%) |
| Total applicants who did not get any placement | 512 (33.27%) |
| Total applicants | 1539 |
*** Category 1
[[./All stack Satisfied applicants (category 1).png]]
| Total                                                     | n (%)        |
|-----------------------------------------------------------+--------------|
| Total Category 1 applicants who got their 1st preference | 64 (6.99%) |
| Total Category 1 applicants who got their 2nd preference | 71 (7.75%) |
| Total Category 1 applicants who got their 3rd preference | 51 (5.57%) |
| Total Category 1 applicants who got their 4th preference | 54 (5.90%) |
| Total Category 1 applicants who got their 5th preference | 49 (5.35%) |
| Total Category 1 applicants who got their 6th preference | 76 (8.30%) |
| Total Category 1 applicants who got their 7th preference | 121 (13.21%) |
| Total Category 1 applicants who got their 8th preference | 40 (4.37%) |
| Total Category 1 applicants who got their 9th preference | 125 (13.65%) |
| Total Category 1 applicants who got their 10th preference | 74 (8.08%) |
| Total Category 1 applicants who got their 11st preference | 51 (5.57%) |
| Total Category 1 applicants who got their 12nd preference | 68 (7.42%) |
| Total Category 1 applicants who got their 13rd preference | 66 (7.21%) |
| Total Category 1 applicants who got their 14th preference | 6 (0.66%) |
| Total Category 1 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 1 applicants who received any placement | 1027 (112.12%) |
| Total Category 1 applicants who did not get any placement | 512 (55.90%) |
| Total Category 1 applicants | 916 |
*** Category 2
[[./All stack Satisfied applicants (category 2).png]]
| Total                                                     | n (%)       |
|-----------------------------------------------------------+-------------|
| Total Category 2 applicants who got their 1st preference | 0 (0.00%) |
| Total Category 2 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 2 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 2 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 2 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 2 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 2 applicants who got their 14th preference | 57 (28.22%) |
| Total Category 2 applicants who got their 15th preference | 54 (26.73%) |
| Total Category 2 applicants who received any placement | 111 (54.95%) |
| Total Category 2 applicants who did not get any placement | 91 (45.05%) |
| Total Category 2 applicants | 202 |
*** Category 3
[[./All stack Satisfied applicants (category 3).png]]
| Total                                                     | n (%)     |
|-----------------------------------------------------------+-----------|
| Total Category 3 applicants who got their 1st preference | 0 (0.00%) |
| Total Category 3 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 3 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 3 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 3 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 3 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 3 applicants who got their 14th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 3 applicants who received any placement | 0 (0.00%) |
| Total Category 3 applicants who did not get any placement | 158 (100.00%) |
| Total Category 3 applicants | 158 |
*** Category 4
[[./All stack Satisfied applicants (category 4).png]]
| Total                                                     | n (%)     |
|-----------------------------------------------------------+-----------|
| Total Category 4 applicants who got their 1st preference | 0 (0.00%) |
| Total Category 4 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 4 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 4 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 4 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 4 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 4 applicants who got their 14th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 4 applicants who received any placement | 0 (0.00%) |
| Total Category 4 applicants who did not get any placement | 148 (100.00%) |
| Total Category 4 applicants | 148 |

*** Category 5
[[./All stack Satisfied applicants (category 5).png]]
| Total                                                     | n (%)     |
|-----------------------------------------------------------+-----------|
| Total Category 5 applicants who got their 1st preference | 0 (0.00%) |
| Total Category 5 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 5 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 5 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 5 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 5 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 5 applicants who got their 14th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 5 applicants who received any placement | 0 (0.00%) |
| Total Category 5 applicants who did not get any placement | 101 (100.00%) |
| Total Category 5 applicants | 101 |
*** Category 6
[[./All stack Satisfied applicants (category 6).png]]
| Total                                                     | n (%)     |
|-----------------------------------------------------------+-----------|
| Total Category 6 applicants who got their 1st preference | 0 (0.00%) |
| Total Category 6 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 6 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 6 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 6 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 6 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 6 applicants who got their 14th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 6 applicants who received any placement | 0 (0.00%) |
| Total Category 6 applicants who did not get any placement | 14 (100.00%) |
| Total Category 6 applicants | 14 |
** Everyone stacks but moves a random to first
*** Total
[[./All stack with random top Satisfied applicants.png]]
| Total                                          | Count (%)    |
|------------------------------------------------+--------------|
| Total applicants who got their 1st preference | 739 (48.02%) |
| Total applicants who got their 2nd preference | 0 (0.00%) |
| Total applicants who got their 3rd preference | 0 (0.00%) |
| Total applicants who got their 4th preference | 2 (0.13%) |
| Total applicants who got their 5th preference | 9 (0.58%) |
| Total applicants who got their 6th preference | 13 (0.84%) |
| Total applicants who got their 7th preference | 0 (0.00%) |
| Total applicants who got their 8th preference | 14 (0.91%) |
| Total applicants who got their 9th preference | 0 (0.00%) |
| Total applicants who got their 10th preference | 0 (0.00%) |
| Total applicants who got their 11st preference | 11 (0.71%) |
| Total applicants who got their 12nd preference | 12 (0.78%) |
| Total applicants who got their 13rd preference | 62 (4.03%) |
| Total applicants who got their 14th preference | 125 (8.12%) |
| Total applicants who got their 15th preference | 40 (2.60%) |
| Total applicants who received any placement | 1027 (66.73%) |
| Total applicants who did not get any placement | 512 (33.27%) |
| Total applicants | 1539 |
*** Category 1
[[./All stack with random top Satisfied applicants (category 1).png]]
| Category 1                                                | Count (%)    |
|-----------------------------------------------------------+--------------|
| Total Category 1 applicants who got their 1st preference | 712 (77.73%) |
| Total Category 1 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 1 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 1 applicants who got their 4th preference | 2 (0.22%) |
| Total Category 1 applicants who got their 5th preference | 9 (0.98%) |
| Total Category 1 applicants who got their 6th preference | 13 (1.42%) |
| Total Category 1 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 1 applicants who got their 8th preference | 14 (1.53%) |
| Total Category 1 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 1 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 1 applicants who got their 11st preference | 11 (1.20%) |
| Total Category 1 applicants who got their 12nd preference | 12 (1.31%) |
| Total Category 1 applicants who got their 13rd preference | 62 (6.77%) |
| Total Category 1 applicants who got their 14th preference | 78 (8.52%) |
| Total Category 1 applicants who got their 15th preference | 3 (0.33%) |
| Total Category 1 applicants who received any placement | 1027 (112.12%) |
| Total Category 1 applicants who did not get any placement | 512 (55.90%) |
| Total Category 1 applicants | 916 |
*** Category 2
[[./All stack with random top Satisfied applicants (category 2).png]]
| Category 2                                                | Count (%)   |
|-----------------------------------------------------------+-------------|
| Total Category 2 applicants who got their 1st preference | 27 (13.37%) |
| Total Category 2 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 2 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 2 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 2 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 2 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 2 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 2 applicants who got their 14th preference | 47 (23.27%) |
| Total Category 2 applicants who got their 15th preference | 37 (18.32%) |
| Total Category 2 applicants who received any placement | 111 (54.95%) |
| Total Category 2 applicants who did not get any placement | 91 (45.05%) |
| Total Category 2 applicants | 202 |
*** Category 3
[[./All stack with random top Satisfied applicants (category 3).png]]
| Category 3                                                | Count (%) |
|-----------------------------------------------------------+-----------|
| Total Category 3 applicants who got their 1st preference | 0 (0.00%) |
| Total Category 3 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 3 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 3 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 3 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 3 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 3 applicants who got their 14th preference | 0 (0.00%) |
| Total Category 3 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 3 applicants who received any placement | 0 (0.00%) |
| Total Category 3 applicants who did not get any placement | 158 (100.00%) |
| Total Category 3 applicants | 158 |
*** Category 4
[[./All stack with random top Satisfied applicants (category 4).png]]
| Category 4                                                | Count (%) |
|-----------------------------------------------------------+-----------|
| Total Category 4 applicants who got their 1st preference | 0 (0.00%) |
| Total Category 4 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 4 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 4 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 4 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 4 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 4 applicants who got their 14th preference | 0 (0.00%) |
| Total Category 4 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 4 applicants who received any placement | 0 (0.00%) |
| Total Category 4 applicants who did not get any placement | 148 (100.00%) |
| Total Category 4 applicants | 148 |
*** Category 5
[[./All stack with random top Satisfied applicants (category 5).png]]
| Category 5                                                | Count (%) |
|-----------------------------------------------------------+-----------|
| Total Category 5 applicants who got their 1st preference | 0 (0.00%) |
| Total Category 5 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 5 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 5 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 5 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 5 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 5 applicants who got their 14th preference | 0 (0.00%) |
| Total Category 5 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 5 applicants who received any placement | 0 (0.00%) |
| Total Category 5 applicants who did not get any placement | 101 (100.00%) |
| Total Category 5 applicants | 101 |
*** Category 6
[[./All stack with random top Satisfied applicants (category 6).png]]
| Category 6                                                | Count (%) |
|-----------------------------------------------------------+-----------|
| Total Category 6 applicants who got their 1st preference | 0 (0.00%) |
| Total Category 6 applicants who got their 2nd preference | 0 (0.00%) |
| Total Category 6 applicants who got their 3rd preference | 0 (0.00%) |
| Total Category 6 applicants who got their 4th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 5th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 6th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 7th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 8th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 9th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 10th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 11st preference | 0 (0.00%) |
| Total Category 6 applicants who got their 12nd preference | 0 (0.00%) |
| Total Category 6 applicants who got their 13rd preference | 0 (0.00%) |
| Total Category 6 applicants who got their 14th preference | 0 (0.00%) |
| Total Category 6 applicants who got their 15th preference | 0 (0.00%) |
| Total Category 6 applicants who received any placement | 0 (0.00%) |
| Total Category 6 applicants who did not get any placement | 14 (100.00%) |
| Total Category 6 applicants | 14 |
* Brief discussion of results
- The most favourable outcomes result when you use the stack but move
  a random hospital to first (i.e. choose whatever your favourite
  hospital is as preference 1, but keep the stack otherwise)
- It is also consistent with the following observations:
  - "The last 4 are the most important" - sort of. Under simulation 2
    and 3, a proportionally larger number of people are being shafted
    to the bottom.
  - "Stacking hurts your chances of getting to preferences 1-6"
    (HETI, 2020) - true wherever stacking is used.
- If this is indeed HETI's algorithm, satisfaction appears to be
  maximised under strategy 3
- There are a lot of deviations between this simulation and the
  actual data produced by HETI.
  - Not only do I not have all the information to make this simulation
    completely accurate, I did not factor in for all the other entry
    pathways and schemes. That's why the simulation output is so
    hilariously bad when it comes to anyone below category 1
* What should you do?
- Depends on what you want lmao
- There is not enough data to draw any definitive conclusions yet
- My code could be wrong, feel free to fork me/submit a pull request
  if you have something to add
* TODO Future directions
- [ ] Significance analysis of results
- [ ] Fix the algorithm so it's more consistent with the real data
- [ ] Implement more scenarios e.g. some people stack, some people
  random
- [ ] More data is needed to make this more accurate e.g. how many
  people preference each hospital in what order every year?
- [ ] Analyse any strategic advantage of stacking vs random selection
* Sources
- I based my data on the AMSA Internship Guide[fn:1] and HETI's Annual Report[fn:2]

* Footnotes

[fn:2] https://www.heti.nsw.gov.au/__data/assets/pdf_file/0019/485002/Annual-Report-for-Medical-Graduate-Recruitment-for-the-2019-Clinical-Year.PDF 

[fn:1] https://www.amsa.org.au/sites/amsa.org.au/files/Internship%20Guide%202019%20Final.pdf

